<sb-layout-dashboard>


  <div *ngIf="!isAddPermission">
    <div class="row justify-content-between mb-3 mt-4">
      <div class="col-sm-4">
        <h4> Assign Permission({{moduleDetils?.length ||'0'}})</h4>
      </div>

      <div class="card " style="margin: 10px;">
        <div class="form-row">
          <div class="p-field col-sm-6 form-group pl-3">
            <div class="form-group">
              <label class="mb-1" for="roleName" name="roleName"><b>Role</b></label><span
                style="color:red;size:5px;">*</span>
              <div>
                <p-dropdown placeholder="Select a type" [options]="Getrole" optionValue="roleId" optionLabel="roleName"
                  id="roleName" [(ngModel)]="roleId" name="roleId" (onChange)="getModuleDetails($event)"
                  [style]="{'minWidth':'420px', 'width': '60px', 'height':'38px'}">
                </p-dropdown>
              </div>
            </div>
          </div>

          <div class="form-group col-md-5 mt-4">

            <label class="mb-1" for="roleName" name="roleName"><b>Select/Deselect All</b></label> &nbsp;
            <label class="switch">
              <input type="checkbox" (change)="bulk($event)">
              <span class="slider round"></span>
            </label>
          </div>
        </div>


        <p-table [value]="moduleDetils" [scrollable]="true" scrollHeight="350px" scrollDirection="both">
          <ng-template pTemplate="header">
            <tr>
              <th class="th-bgcolour">Module Name</th>
              <th class="th-bgcolour">Add</th>
              <th class="th-bgcolour">Edit</th>
              <th class="th-bgcolour">Delete</th>
              <th class="th-bgcolour">View</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-item>
            <tr>
              <td><b>{{item.module.moduleName}}</b></td>
              <td *ngFor="let per of item.permissionList;let i=index">
                <input type="checkbox" [checked]="per.apprvedStatus" [(ngModel)]="per.apprvedStatus" name="per{{i}}"
                  class="larger">
              </td>
               
            </tr>
          </ng-template>

        </p-table>
      </div>



    </div>

  </div>




  <button type="submit" pButton class="p-button-success float-left " (click)="onSubmit()">Save</button>

  <p-confirmPopup></p-confirmPopup>
  <p-toast></p-toast>

</sb-layout-dashboard>